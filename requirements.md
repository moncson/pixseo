# Ayumi メディアサイト構築 要件定義書

## プロジェクト概要

**ドメイン**: https://the-ayumi.jp/
- コーポレートサイト: https://the-ayumi.jp/
- メディアサイト: https://the-ayumi.jp/media/

**予算**: 
- 総額: 300万円程度（補助金含む）
- 実質負担: 100〜150万円

**技術スタック**: React + Firebase

---

## 0. 基本要件

### サイト構成
- 同一ドメイン内でコーポレートサイトとメディアサイトを別サイトとして運営
- 既存の約300記事の移行が必要（SEO対策のためリダイレクトでも可）
- ユニウェブのコードを組み込む（参照: https://the-ayumi.jp/contact/）

### 開発環境
**技術スタック**: React + Firebase
- コーポレートページは現状維持（WordPress）
- メディアページをReact + Firebaseで新規構築

---

## 1. 必須機能・デザイン要件

### パフォーマンス
- ✅ 写真・動画が多くても表示速度を維持（LCPの読み込み速度向上）

### 検索機能
- ✅ タグ検索機能（参照: https://lovegreen.net/）
- ✅ キーワード検索機能（食べログ風）
  - 現状の問題: Ayumiのお知らせ記事や関係ないページが検索結果に含まれる
- ✅ PC・レスポンシブ両方でファーストビューに検索欄を配置

### コンテンツ表示
- ✅ おすすめカテゴリー機能
  - おすすめ記事（PR記事）をトップ画面に表示
  - 参照: https://the-ayumi.jp/media/
- ✅ 新着記事・人気記事ランキング表示
- ✅ 関連記事をブログカードで表示
  - 現状: カスタムHTMLで手動追加、リライト時に手動修正が必要
  - 要望: 自動反映、リライト後も自動更新

### 地図機能
- ✅ Googleマイマップ設置機能
- ✅ 移動支援サービス情報の表示
  - 参照: https://the-ayumi.jp/verified-locations-map/
  - Ayumi側でサービスのGoogleマップをお気に入り登録すればOK

### 記事デザイン改善
- ✅ 文字数が多い記事の可読性向上（装飾が必要）
  - 現状の問題:
    - 青の細字は見づらい、チープな印象
    - 見出しと本文の区別がつきづらい
    - H2・H3・H4の差がわかりにくい
  - 要望: 見出しと本文を明確に区別、H2・H3・H4の差をわかりやすく
- ✅ 参照元「参照：〜〜〜」を目立たないように
  - フォントサイズ変更、インデント追加で本文と明確に区別
  - 参照例: 
    - https://mieru-ca.com/blog/ownedmedia/
    - https://kigyobengo.com/media/useful/3370.html

### メディア表示
- ✅ YouTube埋め込みがスマホでも綺麗に表示（現状変に拡大される問題を解決）
- ✅ 認証店記事の予約サイトボタンを簡単に挿入可能
  - 現状: CSS・HTMLも作成していない

### 入稿者負担軽減
- ✅ リッチテキストエディタ機能の実装
  - 表・ボタンなどを1クリックで挿入可能
  - カスタムコンポーネントとして実装
  - 参照・引用などのデザインを一括管理可能

---

## 2. 次に実装したい機能（優先度: 中）

### 検索機能強化
- 🔄 絞り込み検索機能
  - 参照例:
    - https://ikkel.or.jp/
    - https://saga-style.jp/
- 🔄 よく検索されているキーワードの自動表示
  - 参照: https://amahashi.jp/

### サイト説明ページ
- 🔄 「ふらっとについて」のようなサイト主旨説明ページ
  - 参照: https://tabelog.com/

### カテゴリー機能
- 🔄 カテゴリー表示・クリックでカテゴリー記事一覧表示
  - 参照例:
    - https://asaminami-channel.com/spot/
    - https://the-ayumi.jp/media/

### 外部リンク表示
- 🔄 既存サイト右側のような外部リンク表示
  - yogibo・activo・公式LINE・寄付へのリンク
  - トップページ下部に表示でもOK
  - 参照: https://the-ayumi.jp/media/

### リクエスト機能
- 🔄 読者からの「リクエスト」送信フォーム
  - 新規記事のアイデア収集・需要把握に活用

---

## 3. できれば実装したい機能（予算超過のため後回し）

### 会員機能
- ⏳ お気に入り機能
  - 参照: https://amahashi.jp/
  - お気に入り記事一覧を素早く閲覧可能
- ⏳ 会員登録機能
  - 「情報を取りにいかなくても自動的にきて欲しい」人のみ
  - 記事の最後に会員登録を促す設定

### 地図機能拡張
- ⏳ 緯度経度でのマップ表示
  - 参照: https://rakuyuku.com/index.pl?spotid=1042&back=map&actmode=ToiletDetail
  - 例: 35°41'06.2"N 139°43'47.7"E

### 検索機能拡張
- ⏳ こだわり条件での検索
  - 参照例:
    - https://iko-yo.net/facilities?tags%5B%5D=%E9%AB%98%E9%BD%A2%E8%80%85&target_age_ids%5B%5D=5
    - https://www.kaigo-antenna.jp/kaigo-goout/
  - 必要かどうか要検討

### 認証店機能
- ⏳ 認証店記事内画像をカルーセル表示
  - 横並びだと画像が小さくなり情報がごちゃつく
- ⏳ 「バリアフリー認証とは」ポップアップ表示
  - 参照: https://the-ayumi.jp/service/
  - 認証店の認知向上・CVR向上

### その他
- ⏳ コメント機能
  - 読者（当事者）からの生の意見で記事の信用性向上
  - リスク回避のためコメント機能のみ会員登録もあり
- ⏳ SNS共有バナーの「Twitter」を「X」に修正
- ⏳ 記事下部の「前の記事」「次の記事」デザイン変更
  - 現状: 文字だけ・全文表示できていない・余白が少ない
  - サムネイルの有無やデザインの議論が必要

### 将来拡張性
- ⏳ 有料会員登録者向けサービスに対応できるCMS
- ⏳ 追加カスタマイズが可能な構造

---

## 4. 参考サイト

### 検索・情報サイトの理想像
- **https://amahashi.jp/**
  - 検索サイト機能 + 情報発信メディアの両立
  - 「神社を探している」「神社関係の情報・知識」の両方に寄り添う
  - 最終的な理想像（要素の置き方・機能面・情報の配置構造）

### 検索機能の参考
- **https://tabelog.com/**
- **https://tabelog.com/help/beginner**
- **https://hitosara.com/**
  - エリア・目的・シーンに合わせた検索
  - 移動支援サービス検索への対応
  - 「探す手段」を段階的に増やす

### シンプルなデザイン参考
- **https://www.estorage.co.jp/magazine/**
- **https://lovegreen.net/**
  - シンプルでユーザーが何を見ればいいかわかりやすい
  - 検索機能が分かりやすい位置
  - 目的に応じてスクロール

### 情報収集の参考
- **http://yasashiitabi.sun.bindcloud.jp/**
  - 出している情報が参考になる
  - 女性の車椅子ユーザーのニーズ（介護用ベッドがあるトイレなど）

### スポット・サービス検索の参考
- **https://asaminama-channel.com/spot/**

---

## 5. 現状の課題

### 記事表示の問題
- 現状記事: https://the-ayumi.jp/2024/04/16/trip-sightseeing-immersivefort/
- 文字数が多い記事の可読性が低い
- 見出しと本文の区別がつきづらい
- 関連記事が目立ちにくい

### 検索の問題
- Ayumiのお知らせ記事や関係ないページが検索結果に含まれる

### 入稿の負担
- 表やHTMLの追加、SNS投稿の挿入に工数がかかる
- 関連記事の手動追加・更新が必要

### メディア表示の問題
- YouTube埋め込みがスマホで変に拡大される
- 認証店記事の予約ボタンが簡単に挿入できない

---

## 6. 優先順位まとめ

### 最優先（必須）
1. パフォーマンス最適化（LCP改善）
2. 検索機能（タグ検索・キーワード検索）
3. 記事デザイン改善（見出し・本文の区別）
4. 関連記事の自動表示（ブログカード）
5. Googleマイマップ機能
6. ショートコード機能
7. 新着・人気記事ランキング

### 次優先
1. 絞り込み検索
2. よく検索されているキーワード表示
3. カテゴリー機能強化
4. リクエストフォーム

### 将来実装
1. お気に入り機能
2. 会員登録機能
3. コメント機能
4. 認証店機能拡張
5. 有料会員対応

---

## 7. 技術的な検討事項

### React + Firebase構成
- **フロントエンド**: React（Next.js推奨、SSR/SSGでSEO対応）
- **バックエンド**: Firebase
  - Firestore: 記事データ・ユーザーデータ
  - Firebase Authentication: 会員機能（将来実装）
  - Firebase Storage: 画像・動画保存
  - Firebase Functions: サーバーレス機能（必要に応じて）
- **ホスティング**: Firebase Hosting または Vercel

### パフォーマンス
- Next.jsのImage最適化機能
- 画像の遅延読み込み（Lazy Loading）
- コード分割・動的インポート
- Firebase HostingのCDN活用
- キャッシュ戦略（Service Worker）

### SEO対策
- Next.jsのSSR/SSGでサーバーサイドレンダリング
- メタタグの動的生成
- サイトマップ自動生成
- 既存記事のリダイレクト設定（Firebase Hostingのrewrites）
- 構造化データ（JSON-LD）の実装

### データ移行
- 既存WordPress記事のFirestoreへの移行
- メタデータ（カテゴリー・タグ）の移行
- 画像のFirebase Storageへの移行

### ユニウェブ連携
- Reactコンポーネントとしてユニウェブコードを組み込み
- 必要に応じてiframeまたはカスタムコンポーネント化

### 開発環境
- TypeScript使用推奨
- 状態管理: Context API または Zustand/Recoil
- UIライブラリ: Material-UI, Chakra UI, Tailwind CSS など
- フォーム管理: React Hook Form
- リッチテキストエディタ: Draft.js, Slate.js, TipTap など

---

## 8. 次のステップ

1. ✅ 技術スタック確定: React + Firebase
2. プロジェクト構成の決定（Next.js使用の可否）
3. Firebaseプロジェクトのセットアップ
4. データベース設計（Firestoreのコレクション構造）
5. UI/UXデザインの策定
6. 開発環境の構築
7. 既存記事データの移行計画
8. 開発スケジュールの作成
9. 予算内での実装範囲の確定

