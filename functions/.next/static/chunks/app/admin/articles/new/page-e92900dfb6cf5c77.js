(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{8770:function(e,s,a){Promise.resolve().then(a.bind(a,2530))},2530:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var l=a(7437),t=a(2265),r=a(9376),n=a(4906),c=a(206),d=a(8756),i=a(4126),o=a(5522),u=a(1424),g=a(6797);function m(){let e=(0,r.useRouter)(),[s,a]=(0,t.useState)(!1),[m,x]=(0,t.useState)([]),[h,b]=(0,t.useState)([]),[p,f]=(0,t.useState)({title:"",content:"",excerpt:"",slug:"",authorName:"",categoryIds:[],tagIds:[],featuredImage:"",isPublished:!1,metaTitle:"",metaDescription:"",googleMapsUrl:"",reservationUrl:""});(0,t.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([(0,u.tG)(),(0,g.Ys)()]);x(e),b(s)}catch(e){console.error("Error fetching data:",e)}})()},[]);let y=async s=>{if(s.preventDefault(),!p.title||!p.content||!p.slug||!p.authorName){alert("タイトル、本文、スラッグ、著者名は必須です");return}a(!0);try{await (0,o.tu)({...p,authorId:"admin"}),alert("記事を作成しました"),e.push("/admin/articles")}catch(e){console.error("Error creating article:",e),alert("記事の作成に失敗しました")}finally{a(!1)}};return(0,l.jsx)(n.Z,{children:(0,l.jsx)(c.Z,{children:(0,l.jsxs)("div",{className:"max-w-4xl",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"新規記事作成"})}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タイトル *"}),(0,l.jsx)("input",{type:"text",value:p.title,onChange:e=>f({...p,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"スラッグ（URL） *"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:p.slug,onChange:e=>f({...p,slug:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"article-slug",required:!0}),(0,l.jsx)("button",{type:"button",onClick:()=>{let e=p.title.toLowerCase().replace(/[^a-z0-9\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]+/g,"-").replace(/^-+|-+$/g,"");f({...p,slug:e})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"自動生成"})]}),(0,l.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["URL: /media/articles/",p.slug||"article-slug"]})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"著者名 *"}),(0,l.jsx)("input",{type:"text",value:p.authorName,onChange:e=>f({...p,authorName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"抜粋"}),(0,l.jsx)("textarea",{value:p.excerpt,onChange:e=>f({...p,excerpt:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,l.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,l.jsx)(i.Z,{label:"アイキャッチ画像",value:p.featuredImage,onChange:e=>f({...p,featuredImage:e})})}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"本文 *"}),(0,l.jsx)(d.Z,{value:p.content,onChange:e=>f({...p,content:e})})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリー"}),(0,l.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:p.categoryIds.includes(e.id),onChange:s=>{s.target.checked?f({...p,categoryIds:[...p.categoryIds,e.id]}):f({...p,categoryIds:p.categoryIds.filter(s=>s!==e.id)})},className:"mr-2"}),e.name]},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タグ"}),(0,l.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,l.jsxs)("label",{className:"inline-flex items-center mr-4",children:[(0,l.jsx)("input",{type:"checkbox",checked:p.tagIds.includes(e.id),onChange:s=>{s.target.checked?f({...p,tagIds:[...p.tagIds,e.id]}):f({...p,tagIds:p.tagIds.filter(s=>s!==e.id)})},className:"mr-2"}),e.name]},e.id))})]})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"SEO設定"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メタタイトル"}),(0,l.jsx)("input",{type:"text",value:p.metaTitle,onChange:e=>f({...p,metaTitle:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メタディスクリプション"}),(0,l.jsx)("textarea",{value:p.metaDescription,onChange:e=>f({...p,metaDescription:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"追加設定"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Googleマップ URL"}),(0,l.jsx)("input",{type:"url",value:p.googleMapsUrl,onChange:e=>f({...p,googleMapsUrl:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"予約サイト URL"}),(0,l.jsx)("input",{type:"url",value:p.reservationUrl,onChange:e=>f({...p,reservationUrl:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:p.isPublished,onChange:e=>f({...p,isPublished:e.target.checked}),className:"mr-2"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"この記事を公開する"})]})}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,l.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"作成中...":"記事を作成"})]})]})]})})})}}},function(e){e.O(0,[358,139,972,933,713,971,117,744],function(){return e(e.s=8770)}),_N_E=e.O()}]);