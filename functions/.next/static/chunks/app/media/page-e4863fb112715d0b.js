(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{6819:function(e,t,r){Promise.resolve().then(r.bind(r,238)),Promise.resolve().then(r.bind(r,3602)),Promise.resolve().then(r.t.bind(r,5878,23)),Promise.resolve().then(r.t.bind(r,2972,23))},238:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var n=r(7437),s=r(2265),a=r(7648),o=r(1202);function i(e){let{limit:t=10}=e,[r,i]=(0,s.useState)([]),[u,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await (0,o.VK)(t);i(e)}catch(e){console.error("Error fetching popular keywords:",e)}finally{c(!1)}})()},[t]),u)?(0,n.jsxs)("div",{className:"animate-pulse",children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48 mb-4"}),(0,n.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("div",{className:"h-8 bg-gray-200 rounded"},t))})]}):0===r.length?null:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"よく検索されているキーワード"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,t)=>(0,n.jsxs)(a.default,{href:"/media/search?q=".concat(encodeURIComponent(e.keyword)),className:"inline-flex items-center px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-full text-sm transition-colors",children:[(0,n.jsxs)("span",{className:"mr-1.5 font-semibold text-blue-500",children:["#",t+1]}),e.keyword,(0,n.jsxs)("span",{className:"ml-1.5 text-xs text-blue-500",children:["(",e.count,")"]})]},e.id))})]})}},3602:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var n=r(7437),s=r(2265),a=r(9376);function o(){let[e,t]=(0,s.useState)(""),r=(0,a.useRouter)();return(0,n.jsx)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&r.push("/media/search?q=".concat(encodeURIComponent(e.trim())))},className:"max-w-3xl mx-auto",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"キーワードで検索（例：車椅子、バリアフリー、おでかけ）",className:"w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}),(0,n.jsx)("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"検索"})]})})}},4257:function(e,t,r){"use strict";let n,s,a,o;r.d(t,{I8:function(){return o},db:function(){return s},tO:function(){return a}});var i=r(738),u=r(5978),c=r(62),l=r(3301),d=r(257);{let e=["NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","NEXT_PUBLIC_FIREBASE_PROJECT_ID","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","NEXT_PUBLIC_FIREBASE_APP_ID"].filter(e=>!d.env[e]);e.length>0&&console.warn("Missing Firebase environment variables:",e.join(", "))}n=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)({apiKey:"AIzaSyDi8DiIdhLCJO9bXAzBGdeKwBBi7gYPXHs",authDomain:"ayumi-f6bd2.firebaseapp.com",projectId:"ayumi-f6bd2",storageBucket:"ayumi-f6bd2.firebasestorage.app",messagingSenderId:"561071971625",appId:"1:561071971625:web:0e382383fbb444c0066b38"}),s=(0,u.ad)(n),a=(0,c.cF)(n),o=(0,l.v0)(n)},1202:function(e,t,r){"use strict";r.d(t,{VK:function(){return o},oc:function(){return a}});var n=r(5978),s=r(4257);let a=async e=>{if(!s.db)throw Error("Firestore is not initialized");try{let t=e.trim().toLowerCase();if(!t)return;let r=(0,n.JU)(s.db,"searchHistory",t);(await (0,n.QT)(r)).exists()?await (0,n.pl)(r,{count:(0,n.nP)(1),lastSearchedAt:(0,n.Bt)()},{merge:!0}):await (0,n.pl)(r,{keyword:t,count:1,lastSearchedAt:(0,n.Bt)()})}catch(e){console.error("Error recording search:",e)}},o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(!s.db)return console.error("Firestore is not initialized"),[];try{let t=(0,n.hJ)(s.db,"searchHistory"),r=(0,n.IO)(t,(0,n.Xo)("count","desc"),(0,n.b9)(e));return(await (0,n.PL)(r)).docs.map(e=>{var t;let r=e.data();return{id:e.id,keyword:r.keyword,count:r.count,lastSearchedAt:(null===(t=r.lastSearchedAt)||void 0===t?void 0:t.toDate())||new Date}})}catch(e){return console.error("Error getting popular keywords:",e),[]}}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(2972),s=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[358,139,972,933,878,971,117,744],function(){return e(e.s=6819)}),_N_E=e.O()}]);